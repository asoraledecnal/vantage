<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Vantage</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
</head>
<body id="dashboard-page">
    <div class="texture-layer texture-layer--noise" aria-hidden="true"></div>
    <div class="texture-layer texture-layer--vignette" aria-hidden="true"></div>
    <div id="error-container"></div> <!-- For custom error messages -->

    <header class="nav" id="site-header">
      <div class="nav__logo">
        <a href="index.html" aria-label="Back to home">Vantage</a>
      </div>
      <div class="nav__user">
        <!-- Backend will populate this -->
        <span class="username" style="display: none;"></span> 
      </div>
      <button class="nav__toggle" id="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
        <span></span>
        <span></span>
      </button>
      <nav class="nav__links" id="nav-links">
        <a href="index.html">Home</a>
        <a href="#profile-section" class="nav__profile-link">Profile</a>
        <a href="#" id="logout-btn" class="nav__logout-btn">Logout</a>
      </nav>
    </header>

    <main class="dashboard-container">
        <section class="dashboard-hero">
            <div class="scene__inner scene__inner--hero">
                <div class="hero-eyebrow">Live Diagnostics ‚Ä¢ Command Console</div>
                <h1 class="hero-title">Network Diagnostics</h1>
                <p class="hero-lede">
                    Select a diagnostic tool and monitor your network in real-time with precision and clarity.
                </p>
            </div>
        </section>

        <section class="diagnostics-layout">
            <div class="diagnostics-panel">
                <div class="tabs-wrapper">
                    <div class="tabs-container">
                        <button class="tab-button active" data-tool="whois">
                            <span class="tab-icon">üë§</span>
                            <span class="tab-label">WHOIS</span>
                        </button>
                        <button class="tab-button" data-tool="port_scan">
                            <span class="tab-icon">üîç</span>
                            <span class="tab-label">Port Scan</span>
                        </button>
                        <button class="tab-button" data-tool="geoip">
                            <span class="tab-icon">üåç</span>
                            <span class="tab-label">IP Geolocation</span>
                        </button>
                        <button class="tab-button" data-tool="dns">
                            <span class="tab-icon">üåê</span>
                            <span class="tab-label">DNS Lookup</span>
                        </button>
                        <button class="tab-button" data-tool="speed">
                            <span class="tab-icon">‚ö°</span>
                            <span class="tab-label">Speed Test</span>
                        </button>
                        <div class="tab-underline"></div>
                    </div>
                </div>

                <div class="tab-content-wrapper">
                    <!-- WHOIS -->
                    <div id="whois-tab" class="tab-content active">
                        <div class="widget">
                            <h3><span class="icon">üë§</span>WHOIS Lookup</h3>
                            <p class="widget-desc">Retrieve domain registration and ownership information.</p>
                            <form id="whois-form">
                                <input type="text" name="host" placeholder="Enter domain (e.g., google.com)" required>
                                <button type="submit">Lookup</button>
                            </form>
                            <div id="whois-results" class="results-summary" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Port Scanner -->
                    <div id="port_scan-tab" class="tab-content">
                        <div class="widget">
                            <h3><span class="icon">üîç</span>Single Port Scanner</h3>
                            <p class="widget-desc">Determines if a specific port is open or closed on a host.</p>
                            <form id="port-scan-form">
                                <input type="text" name="host" placeholder="Enter host or IP" required>
                                <input type="number" name="port" placeholder="Port (e.g., 80)" value="80" required>
                                <button type="submit">Scan Port</button>
                            </form>
                            <div id="port-scan-results" class="results-summary" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- IP Geolocation -->
                    <div id="geoip-tab" class="tab-content">
                        <div class="widget">
                            <h3><span class="icon">üåç</span>IP Geolocation Lookup</h3>
                            <p class="widget-desc">Finds the physical location of an IP address or host.</p>
                            <form id="geoip-form">
                                <input type="text" name="host" placeholder="Enter host or IP (e.g., 8.8.8.8)" required>
                                <button type="submit">Locate</button>
                            </form>
                            <div id="geoip-results" class="results-summary" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- DNS Resolver -->
                    <div id="dns-tab" class="tab-content">
                        <div class="widget">
                            <h3><span class="icon">üåê</span>DNS Resolver</h3>
                            <p class="widget-desc">Retrieves DNS records for a given domain.</p>
                            <form id="dns-form">
                                <input type="text" name="host" placeholder="Enter domain (e.g., example.com)" required>
                                <button type="submit">Resolve</button>
                            </form>
                            <div id="dns-results" class="results-summary" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Speed Test -->
                    <div id="speed-tab" class="tab-content">
                        <div class="widget">
                            <h3><span class="icon">‚ö°</span>Internet Speed Test</h3>
                            <p class="widget-desc">Measures the network speed of the server environment.</p>
                            <form id="speed-form"> 
                                <button type="submit">Start Test</button>
                            </form>
                            <div id="speed-results" class="results-summary" style="display: none;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="profile-backdrop"></div>
        <section class="profile-flyout" id="profile-section">
            <div class="profile-shell">
                <div class="profile-header">
                    <div>
                        <p class="eyebrow">Control Center</p>
                        <h2>Account Profile</h2>
                        <p class="profile-desc">Manage personal details, trigger password resets, and see account status.</p>
                    </div>
                </div>
                <div class="profile-grid">
                    <form id="profile-info-form" class="profile-card">
                        <div class="card-header">
                            <div>
                                <div class="result-header">Profile</div>
                                <p class="card-subtitle">Update your name and contact info.</p>
                            </div>
                            <span class="badge badge-soft">Coming soon</span>
                        </div>
                        <div class="form-row">
                            <label for="profile-firstname">First Name</label>
                            <input type="text" id="profile-firstname" name="firstname" placeholder="First name">
                        </div>
                        <div class="form-row">
                            <label for="profile-lastname">Last Name</label>
                            <input type="text" id="profile-lastname" name="lastname" placeholder="Last name">
                        </div>
                        <div class="form-row">
                            <label for="profile-username">Username</label>
                            <input type="text" id="profile-username" name="username" placeholder="username">
                        </div>
                        <div class="form-row">
                            <label for="profile-phone">Phone</label>
                            <input type="tel" id="profile-phone" name="phone" placeholder="+63...">
                        </div>
                        <button type="submit" class="ghost-button">Save changes</button>
                        <p class="note-text">Profile editing endpoint not yet available.</p>
                    </form>

                    <form id="profile-password-form" class="profile-card">
                        <div class="card-header">
                            <div>
                                <div class="result-header">Password</div>
                                <p class="card-subtitle">Reset your password with a new OTP.</p>
                            </div>
                        </div>
                        <div class="form-row">
                            <label for="profile-password-email">Email</label>
                            <input type="email" id="profile-password-email" name="email" placeholder="you@example.com" required>
                        </div>
                        <button type="submit" class="cta-button">Send reset OTP</button>
                        <div id="profile-password-message" class="inline-message"></div>
                    </form>

                    <form id="profile-delete-form" class="profile-card danger-card">
                        <div class="card-header">
                            <div>
                                <div class="result-header">Delete Account</div>
                                <p class="card-subtitle">Permanently remove your account data.</p>
                            </div>
                            <span class="badge badge-danger">Danger</span>
                        </div>
                        <p class="note-text">This operation is permanent. Account deletion API is not enabled yet.</p>
                        <button type="submit" class="danger-button">Delete account</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Assistant Launcher -->
    <button class="assistant-toggle" id="assistant-toggle" aria-label="Open assistant">
        <span>‚ú®</span>
    </button>
    <div class="assistant-panel" id="assistant-panel" aria-live="polite">
        <div class="assistant-header">
            <div>
                <p class="assistant-eyebrow">Dashboard helper</p>
                <h4>Vantage Assistant</h4>
            </div>
            <button class="assistant-close" id="assistant-close" aria-label="Close assistant">√ó</button>
        </div>
        <div class="assistant-body" id="assistant-messages"></div>
        <form class="assistant-form" id="assistant-form">
            <input type="text" id="assistant-input" name="question" placeholder="Ask about WHOIS, DNS, GeoIP‚Ä¶" autocomplete="off" required>
            <button type="submit">Send</button>
        </form>
    </div>

    <footer class="site-footer">
      <p>&copy; 2025 Vantage. Network diagnostics for the modern web.</p>
    </footer>

    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js" defer></script>
    <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js" defer></script>
    <script src="backend-config.js" defer></script>
    <script src="dashboard.js" defer></script>
</body>
</html>
