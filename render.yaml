# render.yaml

services:
  - type: web
    name: vantage-backend
    env: docker
    plan: free # WARNING: Render's free plan may block ICMP traffic, which can cause tools like Ping and Traceroute to fail.
               # For full functionality, you may need to upgrade to a paid plan.
    dockerfilePath: ./Dockerfile
    envVars:
      # The SECRET_KEY is crucial for session security. 
      # generateValue: true tells Render to create a secure, random key for you.
      - key: SECRET_KEY
        generateValue: true

      # This links the DATABASE_URL environment variable to the connection string
      # of the PostgreSQL database defined below.
      - key: DATABASE_URL
        fromDatabase:
          name: vantage
          property: connectionString

databases:
  # This defines a PostgreSQL database to be created and managed by Render.
  # The free plan is suitable for development and small projects.
  - name: vantage
    databaseName: vantage # You can name your database
    user: vantage_user     # You can name the user
    plan: free